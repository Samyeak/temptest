<!DOCTYPE html>
<html>
<head>
	<title>Collection Sheet</title>
	<link rel="stylesheet" type="text/css" href="bootstrap.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="ScrollTabla.css"> -->
	<link rel="stylesheet" type="text/css" href="multifreezer.css">



	<script type="text/javascript" src="jquery/jquery-3.3.1.js"></script>
	<script type="text/javascript" src="knockout-3.5.0rc.js"></script>
	<script type="text/javascript" src="sheetVM.js"></script>
	<!-- <script type="text/javascript" src="jquery.CongelarFilaColumna.js"></script> -->
	<script type="text/javascript" src="multifreezer.js"></script>
	<script type="text/javascript">
		$(document).ready(function (argument) {
			// $("#tblMain").CongelarFilaColumna();

			// $("#tblMain").CongelarFilaColumna({
			// 	width:      '100%',
			// 	height:     '100%'
			// });
		})
	</script>


	<style type="text/css">
		/*.table,tr,  th {
			border: 1px solid black;
			}*/

			.error{
				border: 1px solid red;
			}

			#tblMain{
				/*position: relative;*/
			}

			/*#tblMainHead{
				display: block; 
				position: sticky;
				top: 0;
				z-index: 5;
			}
			#tblMainBody{
				padding-top: 1em;
			}

			.fixedCols{
				position: sticky;
				left: 0;
				z-index: 5;
				}*/

			</style>
		</head>
		<body>

			<div>
				<div>
					<!-- MEMBER SECTION STARTS -->
					<table class="table table-bordered" id="tblMain">
						<thead id="tblMainHead">
							<tr>
								<!-- FIXED COLUMNS -->
								<th rowspan="3">S.N.</th>
								<th rowspan="3" class="text-center">Member</th>
								<th rowspan="3" class="text-center">Limit Amount</th>
								<th rowspan="3" class="text-center">Total Amount</th>
								<th colspan="7" class="text-center">Accounts</th>
							</tr>
							<tr>
								<th data-bind="attr: {colspan: $root.AccountGroups().filter(x=>x.AccountGroupCode()=='01').length*4}" class="text-center">Loan Account</th>
								<th data-bind="attr: {colspan: $root.AccountGroups().filter(x=>x.AccountGroupCode()!='01').length*3}" class="text-center">Deposit Account</th>
							</tr>
							<tr>
								<!-- ko foreach: $root.AccountGroups().filter(x=>x.AccountGroupCode()=='01') -->
								<th>Account No.</th>
								<th>Principal</th>
								<th>Interest</th>
								<th>Installment</th>
								<!-- /ko -->
								<!-- ko foreach: $root.AccountGroups().filter(x=>x.AccountGroupCode()!='01') -->
								<th>Account No.</th>
								<th>Debit</th>
								<th>Credit</th>
								<!-- /ko -->
							</tr>
						</thead>
						<tbody data-bind="foreach: Members, as: 'Member'" id="tblMainBody">
							<tr>
								<td data-bind="text: $index()+1" class="fixedCols"></td>
								<td data-bind="text: Name"></td>
								<td>
									<input type="text" data-bind="value: LimitAmount, enable: false" name="">
								</td>
								<td>
									<p data-bind="css: {error: TotalAmount.hasError}">
										<input type="text" data-bind="value: TotalAmount" name="">
										<!-- TODO: REMOVE -->
										<span data-bind='visible: TotalAmount.hasError, text: TotalAmount.validationMessage'> </span>
									</p>
								</td>
								<!-- ko foreach: $root.AccountGroups, as: 'acGroup' -->
								<td data-bind="attr: {colspan: AccountGroupCode() == '01' ? 4 : 3}">
									<!-- ko template: {name: 'account-section', data: $parent } -->
										<!-- ACCOUNT SECTION IS GENERATED BY TEMPLATE -->
									<!-- /ko -->
								</td>

								<!-- /ko -->
							</tr>
						</tbody>
					</table>
					<!-- END: MEMBER SECTION -->
				</div>
				<div data-bind="text: ko.toJSON($root, null, '\t')"></div>
			</div>

			<!-- ACCOUNT TEMPLATE START -->
			<script type="text/html" id="account-section">
		<!-- 	<span style="color: green" data-bind="text: ko.toJSON($data, null, '\t')"></span>
			<span style="color: purple" data-bind="text: ko.toJSON($parent, null, '\t')"></span>
			<span style="color: blue" data-bind="text: ko.toJSON(Accounts().filter(x=> x.AccountGroupCode() == $parent.AccountGroupCode()), null, '\t')"></span> -->
			<table class="table" data-bind="if: true">
				<tbody data-bind="foreach: Accounts().filter(x=> x.AccountGroupCode() == $parent.AccountGroupCode())">
					<tr>
			<!-- <span style="color: red" data-bind="text: ko.toJSON($data, null, '\t')"></span>
				<span style="color: green" data-bind="text: ko.toJSON($parent, null, '\t')"></span> -->
				<td><input type="text" data-bind="value: AccountNo" name=""></td>
				<!-- ko if: AccountType() == '03' -->
				<td><input type="text" data-bind="value: PrincipalAmt" name=""></td>
				<td><input type="text" data-bind="value: InterestAmt" name=""></td>
				<td><input type="text" data-bind="value: InstallmentAmt" name=""></td>
				<!-- /ko -->
				<!-- ko if: AccountType() == '04' -->
				<td><input type="text" data-bind="value: DebitAmt" name=""></td>
				<td><input type="text" data-bind="value: CreditAmt" name=""></td>
				<!-- /ko -->
			</tr>
		</tbody>
	</table>
</script>
<!-- END: ACCOUNT TEMPLATE -->
</body>
</html>